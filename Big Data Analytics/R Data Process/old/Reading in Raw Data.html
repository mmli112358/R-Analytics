<!--roptions dev='png',fig.width=7,fig.height=7,dpi=100,fig.path='raw_data_fig/' -->



<!DOCTYPE html>
<html>
<!-- 03/09/12 jfw automated, no previous stamp -->
<head>
<style type="text/css">
.knitr.inline {
  background-color: #f7f7f7;
  border:solid 1px #B0B0B0;
}
.error {
	font-weight: bold;
	color: #FF0000;
},
.warning {
	font-weight: bold;
}
.message {
	font-style: italic;
}
.source, .output, .warning, .error, .message {
	padding: 0em 1em;
  border:solid 1px #F7F7F7;
}
.source {
  background-color: #f5f5f5;
}
.rimage.left {
  text-align: left;
}
.rimage.right {
  text-align: right;
}
.rimage.center {
  text-align: center;
}
.hl.num {
  color: #AF0F91;
}
.hl.str {
  color: #317ECC;
}
.hl.com {
  color: #AD95AF;
  font-style: italic;
}
.hl.opt {
  color: #000000;
}
.hl.std {
  color: #585858;
}
.hl.kwa {
  color: #295F94;
  font-weight: bold;
}
.hl.kwb {
  color: #B05A65;
}
.hl.kwc {
  color: #55aa55;
}
.hl.kwd {
  color: #BC5A65;
  font-weight: bold;
}
</style>
<title>R Learning Module: Reading in Raw Data</title>
<link href="/stat/ats_style.css" type="text/css" rel="stylesheet">


</head>



<body>


<!--
 
Revision history:

commit fbfa676a9d7efb96d954c9dedca262ebf6efff96
Author: Andy Lin <alin@oit.ucla.edu>
Date:   Tue Nov 19 10:37:45 2013 -0800

    Headers to R modules pages

commit c1e76be0e499b6a1e8bee538207884e6acb3bdcf
Author: Andy Lin <alin@oit.ucla.edu>
Date:   Tue Nov 19 10:32:29 2013 -0800

    Added headers to R modules pages

commit 806ca9bf67134441da9390044337aa68e64282b1
Author: Andy Lin <alin@oit.ucla.edu>
Date:   Tue Nov 19 10:18:17 2013 -0800

    Added headers to R modules pages


-->



<link href="/stat/idre/css/body.css" rel="stylesheet" type="text/css">
<link href="/stat/idre/css/header.css" rel="stylesheet" type="text/css">
<link href="/stat/idre/css/breadcrumb.css" rel="stylesheet" type="text/css">
<link href="/stat/idre/css/footerTop.css" rel="stylesheet" type="text/css">
<link href="/stat/idre/css/footerBottom.css" rel="stylesheet" type="text/css">

<script type="text/javascript" src="/stat/idre/js/webfont.js"></script>




<!-- tag opened in header.htm, closed in footer.htm -->  
<div id="bodyWrap">
<div id="header">
  <div id="logo">
    <h1 class="page_h1" title="Welcome to Institute for Digital Research and Education">Welcome to the Institute for Digital Research and Education</h1>
    <a class="logoSprite" title="Institute for Digital Research and Education Home" href="https://idre.ucla.edu">Institute for Digital Research and Education Home</a> </div>

<div id="searchBox">
    <div class="btnContainer">
        <span class="btnLabel">Help the Stat Consulting Group by</span> <a href="https://giving.ucla.edu/Standard/NetDonate.aspx?SiteNum=371" class='idreBtn'>giving a gift</a>
    </div>
    <!-- Google Provided Code Starts Here -->
<script type="text/javascript">
  (function() {
    var cx = '017078209654322335373:o5ngkv1vghw';
    var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
  })();
</script>

<!-- Place this tag where you want the search box to render -->
<gcse:searchbox-only></gcse:searchbox-only>
<!-- Google Provided Code Ends Here -->
</div>

</div>

<script type="text/javascript" src="/stat/apps/tree.js"></script>
<script>
function stuff(dir) {

  var x = document.getElementById("bc" + dir);

  if ( !x.stuffed){

    var inner = "<ul>";

    var listing = tree[dir];

    for(var d in listing) {
        var subdir = listing[d];
        var base = subdir.replace("^.*\/", "");
      inner = inner + "<li><a href='" + subdir +"'><span>" + base + "</span></a></li>";
    }





    inner = inner + "</ul>";

    x.innerHTML = x.innerHTML + inner;
    x.stuffed = true;
  }


}
</script>

<style>
#cssmenu ul,
#cssmenu li,
#cssmenu span,
#cssmenu a {
  margin: 0;
  padding: 0;
  position: relative;
}
#cssmenu {
/*  height: 49px;
  border-radius: 5px 5px 0 0;
  -moz-border-radius: 5px 5px 0 0;
  -webkit-border-radius: 5px 5px 0 0;
  background: #fefefe;
  background: -moz-linear-gradient(top, #fefefe 0%, #eee9f0 100%);
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #fefefe), color-stop(100%, #eee9f0));
  background: -webkit-linear-gradient(top, #fefefe 0%, #eee9f0 100%);
  background: -o-linear-gradient(top, #fefefe 0%, #eee9f0 100%);
  background: -ms-linear-gradient(top, #fefefe 0%, #eee9f0 100%);
  background: linear-gradient(top, #fefefe 0%, #eee9f0 100%);
  border-bottom: 2px solid #db000b;
  width: auto; */
}
#cssmenu:after,
#cssmenu ul:after {
  content: '';
  display: block;
  clear: both;
}
#cssmenu a {
/*  background: #fefefe;
  background: -moz-linear-gradient(top, #fefefe 0%, #ececec 100%);
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #fefefe), color-stop(100%, #ececec));
  background: -webkit-linear-gradient(top, #fefefe 0%, #ececec 100%);
  background: -o-linear-gradient(top, #fefefe 0%, #ececec 100%);
  background: -ms-linear-gradient(top, #fefefe 0%, #ececec 100%);
  background: linear-gradient(top, #fefefe 0%, #ececec 100%);
  color: #000; 
  display: inline-block;
  font-family: Helvetica, Arial, Verdana, sans-serif;
  font-size: 12px;
  line-height: 49px;*/
  padding: 0 20px;
  text-decoration: none;
}
#cssmenu ul {
  list-style: none;
}
#cssmenu > ul {
  float: left;
}
#cssmenu > ul > li {
  float: left;
}
#cssmenu > ul > li > a {
  color: #000;
  font-size: 12px;
}
#cssmenu > ul > li:hover:after {
  content: '';
  display: block;
  width: 0;
  height: 0;
  position: absolute;
  left: 50%;
  bottom: 0;
  border-left: 10px solid transparent;
  border-right: 10px solid transparent;
  border-bottom: 10px solid #db000b;
  margin-left: -10px;
}
#cssmenu > ul > li:first-child > a {
  border-radius: 5px 0 0 0;
  -moz-border-radius: 5px 0 0 0;
  -webkit-border-radius: 5px 0 0 0;
}
#cssmenu > ul > li.active:after {
  content: '';
  display: block;
  width: 0;
  height: 0;
  position: absolute;
  left: 50%;
  bottom: 0;
  border-left: 10px solid transparent;
  border-right: 10px solid transparent;
  border-bottom: 10px solid #db000b;
  margin-left: -10px;
}
#cssmenu > ul > li.active > a {
  -moz-box-shadow: inset 0 0 2px rgba(0, 0, 0, 0.1);
  -webkit-box-shadow: inset 0 0 2px rgba(0, 0, 0, 0.1);
  box-shadow: inset 0 0 2px rgba(0, 0, 0, 0.1);
  background: #ececec;
  background: -moz-linear-gradient(top, #ececec 0%, #ffeeff ef 100%);
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #ececec), color-stop(100%, #ffeeff ef));
  background: -webkit-linear-gradient(top, #ececec 0%, #ffeeff ef 100%);
  background: -o-linear-gradient(top, #ececec 0%, #ffeeff ef 100%);
  background: -ms-linear-gradient(top, #ececec 0%, #ffeeff ef 100%);
  background: linear-gradient(top, #ececec 0%, #ffeeff ef 100%);
}
#cssmenu > ul > li:hover > a {
/*  background: #ececec;
  background: -moz-linear-gradient(top, #ececec 0%, #ffeeff ef 100%);
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #ececec), color-stop(100%, #ffeeff ef));
  background: -webkit-linear-gradient(top, #ececec 0%, #ffeeff ef 100%);
  background: -o-linear-gradient(top, #ececec 0%, #ffeeff ef 100%);
  background: -ms-linear-gradient(top, #ececec 0%, #ffeeff ef 100%);
  background: linear-gradient(top, #ececec 0%, #ffeeff ef 100%);
  -moz-box-shadow: inset 0 0 2px rgba(0, 0, 0, 0.1);
  -webkit-box-shadow: inset 0 0 2px rgba(0, 0, 0, 0.1);*/
  box-shadow: inset 0 0 2px rgba(0, 0, 0, 0.1);
}
#cssmenu .has-sub {
  z-index: 1;
}
#cssmenu .has-sub:hover > ul {
  display: block;
}
#cssmenu .has-sub ul {
  display: none;
  position: absolute;
  width: 200px;
/*  top: 100%;*/
  left: 0;
}
#cssmenu .has-sub ul li {
  *margin-bottom: -1px;
}
#cssmenu .has-sub ul li a {
  background: #db000b;
  border-bottom: 1px dotted #ff0f1b;
  filter: none;
  font-size: 11px;
  display: block;
  line-height: 120%;
  padding: 10px;
  color: #ffffff;
}
#cssmenu .has-sub ul li:hover a {
  background: #a80008;
}
#cssmenu .has-sub .has-sub:hover > ul {
  display: block;
}
#cssmenu .has-sub .has-sub ul {
  display: none;
  position: absolute;
  left: 100%;
  top: 0;
}
#cssmenu .has-sub .has-sub ul li a {
  background: #a80008;
  border-bottom: 1px dotted #ff0f1b;
}
#cssmenu .has-sub .has-sub ul li a:hover {
  background: #8f0007;
}


</style>



<div id="infobar">

      <div id="breadcrumbBox"><div class="breadcrumb" id='cssmenu'>
<ul>      
<li id='bc/stat' onmouseover="stuff('/stat')" class='has-sub'><a href='/stat'>stat</a> &gt; </li><li id='bc/stat/r' onmouseover="stuff('/stat/r')" class='has-sub'><a href='/stat/r'>r</a> &gt; </li><li id='bc/stat/r/modules' onmouseover="stuff('/stat/r/modules')" class='has-sub'><a href='/stat/r/modules'>modules</a></li> &gt; raw_data.htm
</ul>
</div></div></div>


<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-12327299-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<!-- MathJax Provided Code Starts Here -->
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/2.1-beta/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- MathJax Provided Code Ends Here -->

<!-- tag opened in header.htm, closed in footer.htm -->  
<div id="bodyContainer">

<h3>R Learning Module<br>
Reading in data from an external file</h3>
<p><code class="knitr inline"><strong>Version info: </strong>Code for this page was tested in R version 3.0.2 (2013-09-25)<br />
 On: 2013-11-19<br />
With: lattice 0.20-24; foreign 0.8-57; knitr 1.5
</code></p>

<h4>1. Reading in data from the console using the <b>scan</b> function</h4>

<p>For very small data vectors it is sometimes handy to read in data directly from the
prompt.  This can be accomplished using the <b>scan</b> function from the
  command line. The <b>scan</b> function reads the fields of
data in the file as specified by the <b>what</b> option, with the default being numeric.  If
the <b>what</b> option is specified to be <b>what</b>=character() or <b>what</b>=" " then all the
fields will be read as strings.  If the data are a mix of numeric, string or complex data, then
a list can be used in the <b>what</b> option.  The default separator for the <b>scan</b>
  function is any white space (single space, tab, or new line). Because the default is space delimiting, you
  can enter data on separate lines.  When all the data have been entered,
just hit the enter key twice which will terminate the scanning.</p>

<blockquote><pre>
# Reading in numeric data
> x <- scan()
1: 3 5 6
4: 3 5 78 29
8: 34 5 1 78
12:
Read 11 items
> x
 [1]  3  5  6  3  5 78 29 34  5  1 78
> mode(x)
[1] "numeric"
# Reading in string data
# empty quotes indicates character input
> y <- scan(what=" ")
1: red blue
3: green red
5: blue yellow
7:
Read 6 items
> y
[1] "red"    "blue"   "green"  "red"    "blue"   "yellow"
> mode(y)
[1] "character"
</pre></blockquote>

<h4>2. Importing data files using the scan function</h4>

<p>The <b>scan</b> function is an extremely flexible tool for
  importing data.&nbsp; Unlike the <b>read.table</b>
function, however, which returns a data frame, the <b>scan</b> function returns a list or
a vector. This makes the <b>scan</b> function less useful for inputting
"rectangular" data such as the <b>car</b> data set that will been seen in later examples.
In the previous example we  input first numeric data and then string data directly from the console;
  in the following example, we input a text file. For the <b>what</b>
  option, we use list and then list the variables, and after each variable, we
  tell R what type of variable (e.g., numeric, string) it is. In the first
  example, the first variable is <b>age</b>, and we tell R that <b>age</b> is a
  numeric variable by setting it equal to 0. The second variable is called
  <b>name</b>, and it is denoted as a string variable by the empty quote marks.&nbsp;
  In the second example, we list NULL first, indicating that we do not want the
  first variable to be read. After using the <b>scan</b> function, we use
  the <b>sapply</b> function, which makes a list out of a vector of names in <b>x</b>.</p>

<div class="chunk" id="unnamed-chunk-2"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl com"># inputting a text file and outputting a list</span>
<span class="hl std">(x</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">scan</span><span class="hl std">(</span><span class="hl str">&quot;http://www.ats.ucla.edu/stat/data/scan.txt&quot;</span><span class="hl std">,</span> <span class="hl kwc">what</span> <span class="hl std">=</span> <span class="hl kwd">list</span><span class="hl std">(</span><span class="hl kwc">age</span> <span class="hl std">=</span> <span class="hl num">0</span><span class="hl std">,</span>
    <span class="hl kwc">name</span> <span class="hl std">=</span> <span class="hl str">&quot;&quot;</span><span class="hl std">)))</span>
</pre></div>
<div class="output"><pre class="knitr r">## $age
## [1] 12 24 35 20
## 
## $name
## [1] "bobby"   "kate"    "david"   "michael"
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># using the same text file and saving only the names as a vector</span>
<span class="hl std">x</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">scan</span><span class="hl std">(</span><span class="hl str">&quot;http://www.ats.ucla.edu/stat/data/scan.txt&quot;</span><span class="hl std">,</span> <span class="hl kwc">what</span> <span class="hl std">=</span> <span class="hl kwd">list</span><span class="hl std">(</span><span class="hl kwa">NULL</span><span class="hl std">,</span> <span class="hl kwc">name</span> <span class="hl std">=</span> <span class="hl kwd">character</span><span class="hl std">()))</span>

<span class="hl std">(x</span> <span class="hl kwb">&lt;-</span> <span class="hl std">x[</span><span class="hl kwd">sapply</span><span class="hl std">(x, length)</span> <span class="hl opt">&gt;</span> <span class="hl num">0</span><span class="hl std">])</span>
</pre></div>
<div class="output"><pre class="knitr r">## $name
## [1] "bobby"   "kate"    "david"   "michael"
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">is.vector</span><span class="hl std">(x)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] TRUE
</pre></div>
</div></div>


<h4>3. Reading in free formatted data from an ASCII file using the <b>read.table</b> function</h4>

<p>The <b>read.table</b> function will let you read in any type of delimited ASCII file.  It can read in
both numeric and character values.  The default is for it to read in everything as numeric data, and
  character data is read in as numeric, it is easiest to change that once the data has been read in using the <b>mode</b>
function. This is by far the easiest and most reliable method of entering data into R.</p>

<div class="chunk" id="unnamed-chunk-3"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl com"># complete data, space delimited, variable names in first row</span>
<span class="hl std">(test</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">read.table</span><span class="hl std">(</span><span class="hl str">&quot;http://www.ats.ucla.edu/stat/data/test.txt&quot;</span><span class="hl std">,</span> <span class="hl kwc">header</span> <span class="hl std">=</span> <span class="hl num">TRUE</span><span class="hl std">))</span>
</pre></div>
<div class="output"><pre class="knitr r">##    prgtype gender  id ses schtyp level
## 1  general      0  70   4      1     1
## 2   vocati      1 121   4      2     1
## 3  general      0  86   4      3     1
## 4   vocati      0 141   4      3     1
## 5 academic      0 172   4      2     1
## 6 academic      0 113   4      2     1
## 7  general      0  50   3      2     1
## 8 academic      0  11   1      2     1
</pre></div>
</div></div>


<p>The default delimiter in <b>read.table</b> is the space delimiter, but this
could create problems if there are missing data.  The function will not work unless every
data line has the same number of values.  Thus, if there are missing data, the data lines
will have different number of values, and you will receive an error.  If there are missing
values the easiest way to fix this problem is to change the type of delimiter.
In the <b>read.table</b> function the <b>sep</b> argument is used to specify the delimiter.</p>
<pre>
# showing the file with missing values, space delimited (test_missing.txt data file)
prgtype  gender  id ses schtyp  level
  general    0  70    4   1      1
   vocati    1 121    4          1
  general    0  86               1
   vocati    0 141    4   3      1
 academic    0 172    4   2      1
 academic    0 113    4   2      1
  general    0  50    3   2      1
 academic    0  11    1   2      1
</pre>

<div class="chunk" id="unnamed-chunk-4"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl std">test.missing</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">read.table</span><span class="hl std">(</span><span class="hl str">&quot;http://www.ats.ucla.edu/stat/data/test_missing.txt&quot;</span><span class="hl std">,</span>
    <span class="hl kwc">header</span> <span class="hl std">=</span> <span class="hl num">TRUE</span><span class="hl std">)</span>
</pre></div>
<div class="error"><pre class="knitr r">## Error: line 2 did not have 6 elements
</pre></div>
</div></div>

<pre>
# showing the file with missing data, comma delimited (test_missing_comma.txt data file)
prgtype,  gender,  id, ses, schtyp,  level
  general,    0,  70,    4,   1,      1
   vocati,    1, 121,    4,    ,      1
  general,    0,  86,     ,    ,      1
   vocati,    0, 141,    4,   3,      1
 academic,    0, 172,    4,   2,      1
 academic,    0, 113,    4,   2,      1
  general,    0,  50,    3,   2,      1
 academic,    0,  11,    1,   2,      1
</pre>

<div class="chunk" id="unnamed-chunk-5"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl std">(test.missing</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">read.table</span><span class="hl std">(</span><span class="hl str">&quot;http://www.ats.ucla.edu/stat/data/test_missing_comma.txt&quot;</span><span class="hl std">,</span>
    <span class="hl kwc">header</span> <span class="hl std">=</span> <span class="hl num">TRUE</span><span class="hl std">,</span> <span class="hl kwc">sep</span> <span class="hl std">=</span> <span class="hl str">&quot;,&quot;</span><span class="hl std">))</span>
</pre></div>
<div class="output"><pre class="knitr r">##     prgtype gender  id ses schtyp level
## 1   general      0  70   4      1     1
## 2    vocati      1 121   4     NA     1
## 3   general      0  86  NA     NA     1
## 4    vocati      0 141   4      3     1
## 5  academic      0 172   4      2     1
## 6  academic      0 113   4      2     1
## 7   general      0  50   3      2     1
## 8  academic      0  11   1      2     1
</pre></div>
</div></div>


<p>The <b>read.table</b> function is very useful when reading in ASCII files
that contain rectangular data. As mentioned above, the default delimiter is blank space;
other delimiters must be specified by using the <b>sep</b> option and setting it equal to
the delimiter in quotes (i.e., <b>sep=";"</b> for the semicolon delimited data file).
Another very common type of file is the comma delimited file.
The next file has been saved out of Excel as a comma delimited file.
This file can be read in by the <b>read.table</b> function by using the <b>sep</b> option,
but it can also be read in by the <b>read.csv</b> function which was written specifically for
comma delimited files. We use the <b>print</b> function to display the
contents of the object <b>test.csv</b> just to show its use.</p>

<div class="chunk" id="unnamed-chunk-6"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl std">test.csv</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">read.csv</span><span class="hl std">(</span><span class="hl str">&quot;http://www.ats.ucla.edu/stat/data/test.csv&quot;</span><span class="hl std">,</span> <span class="hl kwc">header</span> <span class="hl std">=</span> <span class="hl num">TRUE</span><span class="hl std">)</span>

<span class="hl kwd">print</span><span class="hl std">(test.csv)</span>
</pre></div>
<div class="output"><pre class="knitr r">##    prgtype gender  id ses schtyp level
## 1  general      0  70   4      1     1
## 2   vocati      1 121   4      2     1
## 3  general      0  86   4      3     1
## 4   vocati      0 141   4      3     1
## 5 academic      0 172   4      2     1
## 6 academic      0 113   4      2     1
## 7  general      0  50   3      2     1
## 8 academic      0  11   1      2     1
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">test.csv1</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">read.table</span><span class="hl std">(</span><span class="hl str">&quot;http://www.ats.ucla.edu/stat/data/test.csv&quot;</span><span class="hl std">,</span> <span class="hl kwc">header</span> <span class="hl std">=</span> <span class="hl num">TRUE</span><span class="hl std">,</span>
    <span class="hl kwc">sep</span> <span class="hl std">=</span> <span class="hl str">&quot;,&quot;</span><span class="hl std">)</span>

<span class="hl kwd">print</span><span class="hl std">(test.csv1)</span>
</pre></div>
<div class="output"><pre class="knitr r">##    prgtype gender  id ses schtyp level
## 1  general      0  70   4      1     1
## 2   vocati      1 121   4      2     1
## 3  general      0  86   4      3     1
## 4   vocati      0 141   4      3     1
## 5 academic      0 172   4      2     1
## 6 academic      0 113   4      2     1
## 7  general      0  50   3      2     1
## 8 academic      0  11   1      2     1
</pre></div>
</div></div>


<p>It is, of course, also possible to use the <b>read.table</b> function for
reading in files with other delimiters. The next file has semicolon delimiters, followed by
a dataset that uses the letter "z" as a delimiter,
both of which are acceptable delimiters in R.</p>

<div class="chunk" id="unnamed-chunk-7"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl std">test.semi</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">read.table</span><span class="hl std">(</span><span class="hl str">&quot;http://www.ats.ucla.edu/stat/data/testsemicolon.txt&quot;</span><span class="hl std">,</span>
    <span class="hl kwc">header</span> <span class="hl std">=</span> <span class="hl num">TRUE</span><span class="hl std">,</span> <span class="hl kwc">sep</span> <span class="hl std">=</span> <span class="hl str">&quot;;&quot;</span><span class="hl std">)</span>
<span class="hl kwd">print</span><span class="hl std">(test.semi)</span>
</pre></div>
<div class="output"><pre class="knitr r">##    prgtype gender  id ses schtyp level
## 1  general      0  70   4      1     1
## 2   vocati      1 121   4      2     1
## 3  general      0  86   4      3     1
## 4   vocati      0 141   4      3     1
## 5 academic      0 172   4      2     1
## 6 academic      0 113   4      2     1
## 7  general      0  50   3      2     1
## 8 academic      0  11   1      2     1
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">test.z</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">read.table</span><span class="hl std">(</span><span class="hl str">&quot;http://www.ats.ucla.edu/stat/data/testz.txt&quot;</span><span class="hl std">,</span> <span class="hl kwc">header</span> <span class="hl std">=</span> <span class="hl num">TRUE</span><span class="hl std">,</span>
    <span class="hl kwc">sep</span> <span class="hl std">=</span> <span class="hl str">&quot;z&quot;</span><span class="hl std">)</span>
<span class="hl kwd">print</span><span class="hl std">(test.z)</span>
</pre></div>
<div class="output"><pre class="knitr r">##    prgtype gender  id ses schtyp level
## 1  general      0  70   4      1     1
## 2   vocati      1 121   4      2     1
## 3  general      0  86   4      3     1
## 4   vocati      0 141   4      3     1
## 5 academic      0 172   4      2     1
## 6 academic      0 113   4      2     1
## 7  general      0  50   3      2     1
## 8 academic      0  11   1      2     1
</pre></div>
</div></div>


<h4>4. Reading in fixed formatted files</h4>

<p>We use the <b>read.fwf</b> function to read in data with fixed
formats, and we use the <b>width</b> argument to indicate the width (number of columns)
of each variable.  In a fixed format file we do not have the names of the variables on
the first line, and therefore they must be added after we have read in the data.  We add the
variable names using the <b>dimnames</b> function and the bracket notation to indicate that
we are attaching names to the variables (columns) of the data file. Please
note that there are several different ways to accomplish this task; this is just one of them.</p>

<div class="chunk" id="unnamed-chunk-8"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl std">test.fixed</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">read.fwf</span><span class="hl std">(</span><span class="hl str">&quot;http://www.ats.ucla.edu/stat/data/test_fixed.txt&quot;</span><span class="hl std">,</span> <span class="hl kwc">width</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">8</span><span class="hl std">,</span>
    <span class="hl num">1</span><span class="hl std">,</span> <span class="hl num">3</span><span class="hl std">,</span> <span class="hl num">1</span><span class="hl std">,</span> <span class="hl num">1</span><span class="hl std">,</span> <span class="hl num">1</span><span class="hl std">))</span>

<span class="hl kwd">dimnames</span><span class="hl std">(test.fixed)[[</span><span class="hl num">2</span><span class="hl std">]]</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;prgtyp&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;gender&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;id&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;ses&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;schtyp&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;level&quot;</span><span class="hl std">)</span>

<span class="hl std">test.fixed</span>
</pre></div>
<div class="output"><pre class="knitr r">##     prgtyp gender  id ses schtyp level
## 1 general       0  70   4      1     1
## 2 vocati        1 121   4      2     1
## 3 general       0  86   4      3     1
## 4 vocati        0 141   4      3     1
## 5 academic      0 172   4      2     1
## 6 academic      0 113   4      2     1
## 7 general       0  50   3      2     1
## 8 academic      0  11   1      2     1
</pre></div>
</div></div>


<p>For fixed format files the variables names are often in a separate file from the data.
In this example the variable names are in a file called  "names.txt" and the
data are again in "test_fixed.txt". This is especially
convenient when the fixed format file is very large and has many variables; then it becomes
rather impractical to type in all the variable names.&nbsp; In this
situation the <b>width</b> option is used to specify the width of each
variable and the <b>col.name</b> option specifies the file containing the
variable names.&nbsp; So, first we read in the file for the names using the <b>
scan</b> function.&nbsp; We specify that file contains character values by
setting the <b>what</b> option to equal <b>character()</b>.&nbsp;  By using the
<b>col.names</b> option in the <b>read.fwf</b> function, the object <b>names</b> will supply
the variables names.

<div class="chunk" id="unnamed-chunk-9"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl std">(names</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">scan</span><span class="hl std">(</span><span class="hl str">&quot;http://www.ats.ucla.edu/stat/data/names.txt&quot;</span><span class="hl std">,</span> <span class="hl kwc">what</span> <span class="hl std">=</span> <span class="hl kwd">character</span><span class="hl std">()))</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] "prgtyp" "gender" "id"     "ses"    "schtyp" "level"
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">(test.fixed</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">read.fwf</span><span class="hl std">(</span><span class="hl str">&quot;http://www.ats.ucla.edu/stat/data/test_fixed.txt&quot;</span><span class="hl std">,</span>
    <span class="hl kwc">col.names</span> <span class="hl std">= names,</span> <span class="hl kwc">width</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">8</span><span class="hl std">,</span> <span class="hl num">1</span><span class="hl std">,</span> <span class="hl num">3</span><span class="hl std">,</span> <span class="hl num">1</span><span class="hl std">,</span> <span class="hl num">1</span><span class="hl std">,</span> <span class="hl num">1</span><span class="hl std">)))</span>
</pre></div>
<div class="output"><pre class="knitr r">##     prgtyp gender  id ses schtyp level
## 1 general       0  70   4      1     1
## 2 vocati        1 121   4      2     1
## 3 general       0  86   4      3     1
## 4 vocati        0 141   4      3     1
## 5 academic      0 172   4      2     1
## 6 academic      0 113   4      2     1
## 7 general       0  50   3      2     1
## 8 academic      0  11   1      2     1
</pre></div>
</div></div>


<h4>5. Exporting files using the write.table function</h4>

<p>The <b>write.table</b> function outputs data files.  The first argument specifies which
data frame in R is to be exported.  The next argument specifies the file to be created.
The default separator is a blank space but any separator can be specified in the <b>sep</b> option.
The default value for both the <b>row.names</b> and <b>col.names</b> options is TRUE.  In the example we specify
that we do not wish to include row names.  The default setting for the <b>quote</b> option is to include
quotes around all the character values, i.e., around values in string variables and around the
column names.  As we have shown in the example it is very common not to want the quotes when
creating a text file.</p>

<div class="chunk" id="unnamed-chunk-10"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl com"># using the test.csv data frame to write a text file with no row names and</span>
<span class="hl com"># without quotes around the character values (both column names and string</span>
<span class="hl com"># variables)</span>
<span class="hl kwd">write.table</span><span class="hl std">(test.csv,</span> <span class="hl kwd">file.path</span><span class="hl std">(</span><span class="hl kwd">tempdir</span><span class="hl std">(),</span> <span class="hl str">&quot;test1.txt&quot;</span><span class="hl std">),</span> <span class="hl kwc">row.names</span> <span class="hl std">=</span> <span class="hl num">FALSE</span><span class="hl std">,</span>
    <span class="hl kwc">quote</span> <span class="hl std">=</span> <span class="hl num">FALSE</span><span class="hl std">)</span>
</pre></div>
</div></div>


<h4>6. Exporting files in Stata 6/7/8/10 format using the write.dta function</h4>

<p>The <b>write.dta</b> function is part of the <b>foreign</b> package and writes an
R data frame to a Stata data file in either Stata 6, 7, 8, or 10 format.
Although these are older versions of Stata, Stata has no difficulty reading files written
in older versions. It takes at least two arguments, the first one
being the data frame and the second one being the output Stata data file name.
If you look at the help file for <b>write.dta</b>, you will see
that the function writes out a Stata 7 data file, but there are comments and
options for those using later versions of Stata. In the example below, we use the <b>anscombe</b>
data set that comes with R. It happens that the <b>anscombe</b> data is already a data frame,
this being checked with the <b>is.data.frame</b> function.</p>

<div class="chunk" id="unnamed-chunk-11"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">library</span><span class="hl std">(foreign)</span>
<span class="hl kwd">data</span><span class="hl std">(anscombe)</span>
<span class="hl kwd">is.data.frame</span><span class="hl std">(anscombe)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] TRUE
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">anscombe</span>
</pre></div>
<div class="output"><pre class="knitr r">##    x1 x2 x3 x4    y1   y2    y3    y4
## 1  10 10 10  8  8.04 9.14  7.46  6.58
## 2   8  8  8  8  6.95 8.14  6.77  5.76
## 3  13 13 13  8  7.58 8.74 12.74  7.71
## 4   9  9  9  8  8.81 8.77  7.11  8.84
## 5  11 11 11  8  8.33 9.26  7.81  8.47
## 6  14 14 14  8  9.96 8.10  8.84  7.04
## 7   6  6  6  8  7.24 6.13  6.08  5.25
## 8   4  4  4 19  4.26 3.10  5.39 12.50
## 9  12 12 12  8 10.84 9.13  8.15  5.56
## 10  7  7  7  8  4.82 7.26  6.42  7.91
## 11  5  5  5  8  5.68 4.74  5.73  6.89
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">write.dta</span><span class="hl std">(anscombe,</span> <span class="hl kwc">file</span> <span class="hl std">=</span> <span class="hl kwd">file.path</span><span class="hl std">(</span><span class="hl kwd">tempdir</span><span class="hl std">(),</span> <span class="hl str">&quot;anscombe.dta&quot;</span><span class="hl std">))</span>
</pre></div>
</div></div>


<p>Now let's see an example where the data is not yet a data frame. We can
use function <b>as.data.frame</b> to convert the data into a data frame.
Again, these data come with R.</p>

<div class="chunk" id="unnamed-chunk-12"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">data</span><span class="hl std">(WorldPhones)</span>
<span class="hl kwd">is.data.frame</span><span class="hl std">(WorldPhones)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] FALSE
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">WorldPhones</span>
</pre></div>
<div class="output"><pre class="knitr r">##      N.Amer Europe Asia S.Amer Oceania Africa Mid.Amer
## 1951  45939  21574 2876   1815    1646     89      555
## 1956  60423  29990 4708   2568    2366   1411      733
## 1957  64721  32510 5230   2695    2526   1546      773
## 1958  68484  35218 6662   2845    2691   1663      836
## 1959  71799  37598 6856   3000    2868   1769      911
## 1960  76036  40341 8220   3145    3054   1905     1008
## 1961  79831  43173 9053   3338    3224   2005     1076
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">(phones_d</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">as.data.frame</span><span class="hl std">(WorldPhones))</span>
</pre></div>
<div class="output"><pre class="knitr r">##      N.Amer Europe Asia S.Amer Oceania Africa Mid.Amer
## 1951  45939  21574 2876   1815    1646     89      555
## 1956  60423  29990 4708   2568    2366   1411      733
## 1957  64721  32510 5230   2695    2526   1546      773
## 1958  68484  35218 6662   2845    2691   1663      836
## 1959  71799  37598 6856   3000    2868   1769      911
## 1960  76036  40341 8220   3145    3054   1905     1008
## 1961  79831  43173 9053   3338    3224   2005     1076
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">is.data.frame</span><span class="hl std">(phones_d)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] TRUE
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">write.dta</span><span class="hl std">(phones_d,</span> <span class="hl kwc">file</span> <span class="hl std">=</span> <span class="hl kwd">file.path</span><span class="hl std">(</span><span class="hl kwd">tempdir</span><span class="hl std">(),</span> <span class="hl str">&quot;phones.dta&quot;</span><span class="hl std">))</span>
</pre></div>
</div></div>


<p>To give you an idea of what types of data can be read into R using the
<b>foreign</b> package, the help file is shown below.</p>
<pre>
data.restore            Read an S3 Binary or data.dump File
lookup.xport            Lookup Information on a SAS XPORT Format
                        Library
read.arff               Read Data from ARFF Files
read.dbf                Read a DBF File
read.dta                Read Stata Binary Files
read.epiinfo            Read Epi Info Data Files
read.mtp                Read a Minitab Portable Worksheet
read.octave             Read Octave Text Data Files
read.spss               Read an SPSS Data File
read.ssd                Obtain a Data Frame from a SAS Permanent
                        Dataset, via read.xport
read.systat             Obtain a Data Frame from a Systat File
read.xport              Read a SAS XPORT Format Library
write.arff              Write Data into ARFF Files
write.dbf               Write a DBF File
write.dta               Write Files in Stata Binary Format
write.foreign           Write Text Files and Code to Read Them
</pre>

  

<div style="clear:both;">
<p style = "float:left;">
<a href="/stat/mult_pkg/faq/general/citingats.htm">How to cite this page</a></p>
<p style = "float:right;">
<a href="/stat/apps/codetrack/errdirect.php">
Report an error on this page or leave a comment</a>
</p>
</div>

<div style="clear:both">
<p>The content of this web site should not be construed as an endorsement
of any particular web site, book, or software product by the
University of California.</p>
</div>

<!-- closes bodycontainer from header -->
</div>

<div id="footerTop">
  <div id="pageFooterBoxTop">
    <div id="footerProjectsDetail">
      <h2 class="footerProjectsDetailTitle">IDRE Research Technology Group</h2>
      <div class="projectDetailBox">
        <div class="projectIcon"></div>
        <div class="projectDetail">
          <h2><a href="https://idre.ucla.edu/hpc">High Performance Computing</a></h2>
        </div>
      </div>
      <div class="projectDetailBox">
        <div class="projectIcon"></div>
        <div class="projectDetail">
          <h2><a href="https://idre.ucla.edu/stats">Statistical Computing</a></h2>
        </div>
      </div>
      <div class="projectDetailBox">
        <div class="projectIcon"></div>
        <div class="projectDetail">
          <h2><a href="https://idre.ucla.edu/gis-visualization">GIS and Visualization</a></h2>
        </div>
      </div>
    </div>
    <div id="footerProjects">
      <div class="projectMenu">
<ul class="menu"><li class="leaf first menu-mlid-4445"><a href="https://idre.ucla.edu/hpc" title="High Performance Computing" id="custom_breadcrumbs_menu-4445">High Performance Computing</a></li>
<li class="leaf menu-mlid-7191"><a href="https://idre.ucla.edu/gis" title="" id="custom_breadcrumbs_menu-7191">GIS</a></li>
<li class="leaf menu-mlid-4447"><a href="https://idre.ucla.edu/stats" title="Statistical Computing" id="custom_breadcrumbs_menu-4447">Statistical Computing</a></li>
<li class="leaf menu-mlid-4449"><a href="https://idre.ucla.edu/hoffman2" title="Hoffman2 Cluster" id="custom_breadcrumbs_menu-4449">Hoffman2 Cluster</a></li>
<li class="leaf menu-mlid-4466"><a href="https://idre.ucla.edu/mapshare" title="" id="custom_breadcrumbs_menu-4466">Mapshare</a></li>
<li class="leaf menu-mlid-7197"><a href="https://idre.ucla.edu/events/classes" title="" id="custom_breadcrumbs_menu-7197">Classes</a></li>
<li class="leaf menu-mlid-7626"><a href="https://idre.ucla.edu/hoffman2/getting-started" title="" id="custom_breadcrumbs_menu-7626">Hoffman2 Account Application</a></li>
<li class="leaf menu-mlid-4471"><a href="https://idre.ucla.edu/visualization" title="" id="custom_breadcrumbs_menu-4471">Visualization</a></li>
<li class="leaf menu-mlid-7198"><a href="https://idre.ucla.edu/events/conferences" title="" id="custom_breadcrumbs_menu-7198">Conferences</a></li>
<li class="leaf menu-mlid-7627"><a href="https://idre.ucla.edu/hoffman2/cluster-statistics" title="" id="custom_breadcrumbs_menu-7627">Hoffman2 Usage Statistics</a></li>
<li class="leaf menu-mlid-4465"><a href="https://idre.ucla.edu/3d-modeling" title="" id="custom_breadcrumbs_menu-4465">3D Modeling</a></li>
<li class="leaf menu-mlid-7192"><a href="https://idre.ucla.edu/reading-materials" title="" id="custom_breadcrumbs_menu-7192">Reading Materials</a></li>
<li class="leaf menu-mlid-4472"><a href="http://portal.ucgrid.org/" title="" id="custom_breadcrumbs_menu-4472">UC Grid Portal</a></li>
<li class="leaf menu-mlid-4467"><a href="https://idre.ucla.edu/technology-sandbox" title="" id="custom_breadcrumbs_menu-4467">Technology Sandbox</a></li>
<li class="leaf menu-mlid-7713"><a href="http://lists.ucla.edu/cgi-bin/mailman/listinfo/idremailinglist" title="" id="custom_breadcrumbs_menu-7713">IDRE Listserv</a></li>
<li class="leaf menu-mlid-4473"><a href="http://grid.ucla.edu/" title="" id="custom_breadcrumbs_menu-4473">UCLA Grid Portal</a></li>
<li class="leaf menu-mlid-7671"><a href="https://idre.ucla.edu/gis-visualization/sandbox-access" title="" id="custom_breadcrumbs_menu-7671">Tech Sandbox Access</a></li>
<li class="leaf menu-mlid-7773"><a href="https://idre.ucla.edu/resources" title="" id="custom_breadcrumbs_menu-7773">IDRE Resources</a></li>
<li class="leaf menu-mlid-7630"><a href="https://idre.ucla.edu/hpc/shared-cluster-program" title="" id="custom_breadcrumbs_menu-7630">Shared Cluster &amp; Storage</a></li>
<li class="leaf menu-mlid-7280"><a href="https://idre.ucla.edu/data-centers" title="Data Centers" id="custom_breadcrumbs_menu-7280">Data Centers</a></li>
<li class="leaf menu-mlid-8026"><a href="http://dataarchives.ss.ucla.edu/" title="Social Sciences Data Archive" id="custom_breadcrumbs_menu-8026">Social Sciences Data Archive</a></li>
<li class="leaf last menu-mlid-8013"><a href="https://idre.ucla.edu/about" title="" id="custom_breadcrumbs_menu-8013">About IDRE</a></li>
</ul>
      </div>
    </div>
  </div>
</div><div id="footerBottom">
  <div id="pageFooterBoxBtm">
    <div id="footerLeft">
      <div id="uclaSprite"> <a href="http://www.ucla.edu" title="University of California, Los Angeles Home"></a> </div>
      <div id="footerMenu">
        <ul class="footerMenu_List" title="Site Links">
          <li> <a href="https://idre.ucla.edu/about">About</a> </li>
          <li> <a href="https://idre.ucla.edu/contact">Contact</a> </li>
          <li> <a href="https://idre.ucla.edu/news">News</a> </li>
          <li> <a href="https://idre.ucla.edu/events">Events</a> </li>
          <li> <a href="https://idre.ucla.edu/experts">Our Experts</a> </li>
        </ul>
        <div id="footerCopyright">
          <ul class="footerTOS_List">
             <li>&#169; 2016 UC Regents</li>
          <li><a href="http://www.ucla.edu/terms-of-use/" target="_blank" title="UCLA Terms of Use">Terms of Use &amp; Privacy Policy</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div id="footerRight">
      <div id="oitSprite"> <a id="oitLink" title="Office of Information Technology" href="http://oit.ucla.edu/"></a> </div>
      <div id="footerTOS"> </div>
    </div>
  </div>
</div>

<!-- closes bodywrap from header -->
</div>
 

  </body>

</html>
